<!DOCTYPE html>
<html>
  <head>
    <link id="favicon" rel="icon" type="image/png" href="images/pause.png" />
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <!-- Original jquery ui selectable dont respect clicks
         http://forum.jquery.com/topic/solution-for-selectable-vs-dblclick --> 
    <script src="jquery-ui.js" type="text/javascript"></script>
    <link type="text/css" href="http://code.jquery.com/ui/jquery-ui-git.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-lightness/jquery-ui.min.css">

    <!-- https://npmjs.org/package/id3js -->
    <script src="id3.min.js" type="text/javascript"></script>

    <!--https://github.com/nickdesaulniers/javascript-playlist-parser -->
    <script type="text/javascript" src="https://rawgithub.com/nickdesaulniers/javascript-playlist-parser/master/lib/parser.min.js"></script>
    <script src="controls.js" type="text/javascript" ></script>
    <script src="playlist.js" type="text/javascript" ></script>
    <script src="attachPlaylist.js" type="text/javascript" ></script>
    <script>
      var title='***Welcome***\u2007'; //chrome removes usual whitespaces from the end of the title
      $(document).ready(function() {
        attachPlaylist(playlist);
        controls.setup($('#audio')[0]);
        var songs = [{'src':'1.mp3','name':'qwe.ogg'},{'src':'2.mp3','name':'Burzum - Back to the shadows'}];
        controls.setPlaylist(playlist);
        playlist.addSongs(songs);
        controls.audio.src = playlist.getCurrentSong().src;
        controls.audio.volume=0.11;

        var shl = function(s){
          return s.concat(s.slice(0,1)).slice(1);
        }
        setInterval(function(){
            document.title = shl(shl(title));
            title = shl(shl(title));
            },
            500
        );
        $('.controls').buttonset();
        $('.menu').buttonset();
        $('#dialog').dialog({autoOpen:false,modal:true});
      });
    </script>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="column">
      <div id="controls_wrapper">
        <div id="current_song">Welcome to gAmp</div>
        <audio id="audio" src="" style="width:100%" controls>Your browser does not support the audio tag.</audio>
        <div class="controls">
          <button onclick="controls.play()" ><label><img src="images/play.png" class="controls_img" /></label></button>
          <button onclick="controls.pause()" ><label><img src="images/pause.png" class="controls_img" /></label></button>
          <button onclick="controls.stop()" ><label><img src="images/stop.png" class="controls_img" /></label></button>
          <button onclick="controls.previous()" ><label><img src="images/previous.png" class="controls_img" /></label></button>
          <button onclick="controls.next()" ><label><img src="images/next.png" class="controls_img" /></label></button>
          <span class="checkboxes">
            <input type="checkbox" id="shuffle" onchange="controls.checkToggle(this)" /><label for="shuffle">Shuffle</label>
            <br>
            <input type="checkbox" id="repeat" onchange="controls.checkToggle(this)" /><label for="repeat">Repeat</label>
          </span>
        </div>
        <div class='menu'>
          <button onclick="controls.addFiles($('#filesInput')[0])">Add files</button>
          <input id='filesInput' style="display:none" type="file" multiple accept="audio/mp3,audio/ogg,audio/wave"/>     
          <button onclick="controls.addFiles($('#directoryInput')[0])">Add dir</button>
          <input id='directoryInput' style="display:none" type="file" multiple webkitdirectory accept="audio/mp3,audio/ogg,audio/wave"/> 
          <button onclick="controls.addPlaylist($('#playlistInput')[0])">Add playlist</button>
          <input id='playlistInput' style="display:none" type="file" accept="audio/x-mpegurl,audio/x-scpls"/>
          <button onclick="controls.removeSongs()">Remove selected</button>
        </div>
      </div>
      <div id="playlist_wrapper">
        <ol id="playlist">
        </ol>
      </div>
    </div>
    <div id="dialog"></div>
  </body>
</html>