<!DOCTYPE html>
<html>
  <head>
    <link id="favicon" rel="icon" type="image/png" href="images/pause.png" />
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <!-- Original jquery ui selectable dont respect clicks
         http://forum.jquery.com/topic/solution-for-selectable-vs-dblclick --> 
    <script src="jquery-ui.js" type="text/javascript"></script>
    <link type="text/css" href="http://code.jquery.com/ui/jquery-ui-git.css" rel="stylesheet" />

    <!-- https://npmjs.org/package/id3js -->
    <script src="id3.min.js" type="text/javascript"></script>

    <!--https://github.com/nickdesaulniers/javascript-playlist-parser -->
    <script type="text/javascript" src="https://rawgithub.com/nickdesaulniers/javascript-playlist-parser/master/lib/parser.min.js"></script>
    <script src="controls.js" type="text/javascript" ></script>
    <script src="playlist.js" type="text/javascript" ></script>
    <script src="attachPlaylist.js" type="text/javascript" ></script>
    <script>
      var title='***Welcome***\u2007'; //chrome removes usual whitespaces from the end of the title
      $(document).ready(function() {
        attachPlaylist(playlist);
        controls.setup($('#audio')[0]);
        var songs = [{'src':'1.mp3','name':'qwe.ogg'},{'src':'2.mp3','name':'Burzum - Back to the shadows'}];
        controls.setPlaylist(playlist);
        playlist.addSongs(songs);
        controls.audio.src = playlist.getCurrentSong().src;
        controls.audio.volume=0.11;

        var shl = function(s){
          return s.concat(s.slice(0,1)).slice(1);
        }
        setInterval(function(){
            document.title = shl(shl(title));
            title = shl(shl(title));
            },
            500
        );
      });
    </script>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div style="position:fixed; background-color:#ffffff; width:600px;">
      <div id="current_song">Welcome to gAmp</div>
      <audio id="audio" src="" style="width:100%" controls>Your browser does not support the audio tag.</audio>
      <div class="controls">
        <img src="images/play.png" onclick="controls.play()" class="controls_img" />
        <img src="images/pause.png" onclick="controls.pause()" class="controls_img" />
        <img src="images/stop.png" onclick="controls.stop()" class="controls_img" />
        <img src="images/previous.png" onclick="controls.previous()" class="controls_img" />
        <img src="images/next.png" onclick="controls.next()" class="controls_img" />
      </div>

      <div class='menu'>
        <button onclick="controls.addFiles($('#filesInput')[0])"><label>Add files</label></button>
        <input id='filesInput' style="display:none" type="file" multiple accept="audio/mp3,audio/ogg,audio/wave"/>      
        <button onclick="controls.addFiles($('#directoryInput')[0])"><label>Add dir</label></button>
        <input id='directoryInput' style="display:none" type="file" multiple webkitdirectory accept="audio/mp3,audio/ogg,audio/wave"/> 
        <a href='#'>Add playlist</a>
        <button onclick="controls.removeSongs()"><label>Remove selected</label></button>
      </div>
    </div>
    <div id="playlist_wrapper">
      <ol id="playlist">
      </ol>
    </div>
  </body>
</html>